<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Cleaner</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
    textarea { width: 100%; height: 150px; margin-bottom: 10px; padding: 10px; font-size: 14px; }
    button { margin-right: 10px; padding: 8px 12px; cursor: pointer; border: none; border-radius: 6px; }
    .btn-clean { background: #007bff; color: white; }
    .btn-copy { background: #28a745; color: white; }
    .btn-add { background: #ff9800; color: white; }
    ul { list-style: none; padding: 0; }
    li { background: white; padding: 5px; margin: 3px 0; border-radius: 4px; }
  </style>
</head>
<body>

  <h2>üßπ Text Cleaner</h2>
  <textarea id="inputText" placeholder="Paste or write your text here..."></textarea>
  <button class="btn-clean" onclick="cleanText()">Clean & Format</button>
  <button class="btn-copy" onclick="copyText()">Copy Result</button>

  <h3>‚ú® Result:</h3>
  <textarea id="outputText" readonly></textarea>

  <h3>‚ûï Add Special Capitalization Rule</h3>
  <input type="text" id="originalWord" placeholder="Word to replace">
  <input type="text" id="correctWord" placeholder="Correct version">
  <button class="btn-add" onclick="addRule()">Add Rule</button>

  <h3>üìå Current Rules:</h3>
  <ul id="rulesList"></ul>

  <script>
    let rules = JSON.parse(localStorage.getItem("textCleanerRules")) || {};

    // Display rules
    function displayRules() {
      const rulesList = document.getElementById("rulesList");
      rulesList.innerHTML = "";
      for (const [key, value] of Object.entries(rules)) {
        const li = document.createElement("li");
        li.textContent = `${key} ‚ûù ${value}`;
        rulesList.appendChild(li);
      }
    }

    function cleanText() {
      let text = document.getElementById("inputText").value;

      // Remove extra spaces and line breaks
      text = text.replace(/\s+/g, " ").trim();

      // Apply rules
      for (const [key, value] of Object.entries(rules)) {
        const regex = new RegExp(key, "gi"); 
        text = text.replace(regex, value);
      }

      document.getElementById("outputText").value = text;
    }

    function copyText() {
      const output = document.getElementById("outputText");
      output.select();
      document.execCommand("copy");
      alert("‚úÖ Text copied!");
    }

    function addRule() {
      const original = document.getElementById("originalWord").value.trim();
      const correct = document.getElementById("correctWord").value.trim();

      if (original && correct) {
        rules[original] = correct;

        // Save in localStorage
        localStorage.setItem("textCleanerRules", JSON.stringify(rules));

        displayRules();
        document.getElementById("originalWord").value = "";
        document.getElementById("correctWord").value = "";
      }
    }

    // Initialize on load
    window.onload = displayRules;
  </script>

</body>
</html>
